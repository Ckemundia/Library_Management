{% extends "student_layout.html" %}
{% block content %}
<h3 class="mb-4">ðŸ“š Browse Books</h3>

<!-- Search Bar -->
<form method="GET" action="/student/books" class="mb-4">
    <input type="text" name="search" class="form-control" placeholder="Search books by title, author or ISBN..." value="{{ search }}">
</form>

<!-- Book Grid -->
<div class="row">
    {% for book in books %}
    <div class="col-md-3 mb-4">
        <div class="card h-100 shadow-sm">
            {% if book.cover %}
                <img src="{{ url_for('static', filename='covers/' + book.cover) }}" class="card-img-top" style="height: 200px; object-fit: cover;">
            {% else %}
                <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 200px;">No Image</div>
            {% endif %}
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ book.title }}</h5>
                <p class="card-text mb-1 text-muted">ðŸ‘¤ {{ book.author }}</p>
                <p class="card-text text-muted">ðŸ“¦ {{ book.available }} copies</p>
                {% if book.available > 0 %}
                <form method="POST" action="/student/request_book" class="mt-auto">
                    <input type="hidden" name="book_id" value="{{ book.id }}">
                    <button class="btn btn-sm btn-primary w-100">Request</button>
                </form>
                {% else %}
                <button class="btn btn-sm btn-secondary w-100 mt-auto" disabled>Unavailable</button>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
